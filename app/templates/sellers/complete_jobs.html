{% extends 'base.html' %}

{% block dashboardbody %}
<div class="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md mt-10">
    <h2 class="text-2xl font-bold mb-4">Complete Job</h2>
    <div class="mb-4">
        <h3 class="text-lg font-bold">Title:</h3>
        <p class="text-gray-600">{{ job.title }}</p>
    </div>
    <div class="mb-4">
        <h3 class="text-lg font-bold">Description:</h3>
        <p class="text-gray-600">{{ job.description }}</p>
    </div>
    <div class="mb-4">
        <h3 class="text-lg font-bold">Freelancer:</h3>
        <p class="text-gray-600">{{ job.freelancer.get_full_name() }}</p>
    </div>
    <div class="mb-4">
        <h3 class="text-lg font-bold">Budget:</h3>
        <p class="text-gray-600">{{ job.listing.budget }}</p>
    </div>

    {% if unapproved_deliverables > 0 %}
    <p class="text-red-500 font-bold mb-4">Cannot complete the job until all deliverables are approved.</p>
    {% else %}
    <form method="POST" action="{{ url_for('complete_job', job_id=job.id) }}">
        <button class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
            Complete Job
        </button>
    </form>
    {% endif %}
</div>
{% endblock %}