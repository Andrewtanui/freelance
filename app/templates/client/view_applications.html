{% extends 'layout.html' %}

{% block body %}
<div class="max-w-5xl mx-auto p-6 bg-white rounded-lg mt-10">
    <h2 class="text-2xl font-bold mb-4">Applications for {{ listing.title }}</h2>
    {% if applications %}
        <ul class="divide-y divide-gray-200">
            {% for application in applications %}
            <li class="py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-bold">{{ application.freelancer.get_full_name() }}</h3>
                        <p class="text-gray-600">{{ application.cover_letter }}</p>
                    </div>
                    
                </div>
                <div class="flex items-center mt-6">
                    <form method="POST" action="{{ url_for('view_applications', listing_id=listing.id) }}">
                        <input type="hidden" name="application_id" value="{{ application.id }}">
                        {% if application.approved %}
                            <button class="relative mt-4 rounded-lg border-2 border-blue-700 bg-blue-700 px-6 py-2 font-medium text-white transition hover:translate-y-1" type="submit" name="action" value="approve" disabled>Approved</button>
                        {% else %}
                            <button class="relative mt-4 rounded-lg border-2 border-blue-700 bg-blue-700 px-6 py-2 font-medium text-white transition hover:translate-y-1" type="submit" name="action" value="approve">Approve application</button>
                        {% endif %}
                        <button class="relative mt-4 rounded-lg border-2 border-red-700 bg-red-500 px-6 py-2 font-medium text-white transition hover:translate-y-1" type="submit" name="action" value="reject">Reject Application</button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No applications found for this listing.</p>
    {% endif %}
</div>

  
{% endblock %}